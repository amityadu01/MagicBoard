var jsPDF=function(e){"use strict";function t(t){var r={};this.subscribe=function(e,t,n){if("function"!=typeof t)return!1;r.hasOwnProperty(e)||(r[e]={});var i=Math.random().toString(35);return r[e][i]=[t,!!n],i},this.unsubscribe=function(e){for(var t in r)if(r[t][e])return delete r[t][e],!0;return!1},this.publish=function(n){if(r.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var a in r[n]){var s=r[n][a];try{s[0].apply(t,i)}catch(c){e.console&&console.error("jsPDF PubSub Error",c.message,c)}s[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}}}function r(a,s,c,u){var f={};"object"==typeof a&&(f=a,a=f.orientation,s=f.unit||s,c=f.format||c,u=f.compress||f.compressPdf||u),s=s||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var l,h,d,p,g,y,b,v,C,m=((""+c).toLowerCase(),!!u&&"function"==typeof Uint8Array),w=f.textColor||"0 g",A=f.drawColor||"0 G",j=f.fontSize||16,D=f.lineHeight||1.15,E=f.lineWidth||.200025,I=2,P=!1,S=[],O={},T={},F=0,B=[],R=[],L=[],x=[],k=[],U=0,N=0,M=0,_={title:"",subject:"",author:"",keywords:"",creator:""},G={},J=new t(G),H=function(e){return e.toFixed(2)},z=function(e){return e.toFixed(3)},V=function(e){return("0"+parseInt(e)).slice(-2)},W=function(e){P?B[p].push(e):(M+=e.length+1,x.push(e))},X=function(){return I++,S[I]=M,W(I+" 0 obj"),I},Y=function(){var e=2*B.length+1;e+=k.length;var t={objId:e,content:""};return k.push(t),t},q=function(){return I++,S[I]=function(){return M},I},K=function(e){S[e]=M},Q=function(e){W("stream"),W(e),W("endstream")},Z=function(){var t,n,i,o,a,s,c,u,f;for(c=e.adler32cs||r.adler32cs,m&&"undefined"==typeof c&&(m=!1),t=1;F>=t;t++){if(X(),u=(g=L[t].width)*h,f=(y=L[t].height)*h,W("<</Type /Page"),W("/Parent 1 0 R"),W("/Resources 2 0 R"),W("/MediaBox [0 0 "+H(u)+" "+H(f)+"]"),W("/Contents "+(I+1)+" 0 R"),J.publish("putPage",{pageNumber:t,page:B[t]}),W(">>"),W("endobj"),n=B[t].join("\n"),X(),m){for(i=[],o=n.length;o--;)i[o]=n.charCodeAt(o);s=c.from(n),a=new Deflater(6),a.append(new Uint8Array(i)),n=a.flush(),i=new Uint8Array(n.length+6),i.set(new Uint8Array([120,156])),i.set(n,2),i.set(new Uint8Array([255&s,s>>8&255,s>>16&255,s>>24&255]),n.length+2),n=String.fromCharCode.apply(null,i),W("<</Length "+n.length+" /Filter [/FlateDecode]>>")}else W("<</Length "+n.length+">>");Q(n),W("endobj")}S[1]=M,W("1 0 obj"),W("<</Type /Pages");var l="/Kids [";for(o=0;F>o;o++)l+=3+2*o+" 0 R ";W(l+"]"),W("/Count "+F),W(">>"),W("endobj")},$=function(e){e.objectNumber=X(),W("<</BaseFont/"+e.PostScriptName+"/Type/Font"),"string"==typeof e.encoding&&W("/Encoding/"+e.encoding),W("/Subtype/Type1>>"),W("endobj")},ee=function(){for(var e in O)O.hasOwnProperty(e)&&$(O[e])},te=function(){J.publish("putXobjectDict")},re=function(){W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),W("/Font <<");for(var e in O)O.hasOwnProperty(e)&&W("/"+e+" "+O[e].objectNumber+" 0 R");W(">>"),W("/XObject <<"),te(),W(">>")},ne=function(){ee(),J.publish("putResources"),S[2]=M,W("2 0 obj"),W("<<"),re(),W(">>"),W("endobj"),J.publish("postPutResources")},ie=function(){J.publish("putAdditionalObjects");for(var e=0;e<k.length;e++){var t=k[e];S[t.objId]=M,W(t.objId+" 0 obj"),W(t.content),W("endobj")}I+=k.length,J.publish("postPutAdditionalObjects")},oe=function(e,t,r){T.hasOwnProperty(t)||(T[t]={}),T[t][r]=e},ae=function(e,t,r,n){var i="F"+(Object.keys(O).length+1).toString(10),o=O[i]={id:i,PostScriptName:e,fontName:t,fontStyle:r,encoding:n,metadata:{}};return oe(i,t,r),J.publish("addFont",o),i},se=function(){for(var e="helvetica",t="times",r="courier",n="normal",i="bold",o="italic",a="bolditalic",s="StandardEncoding",c=[["Helvetica",e,n],["Helvetica-Bold",e,i],["Helvetica-Oblique",e,o],["Helvetica-BoldOblique",e,a],["Courier",r,n],["Courier-Bold",r,i],["Courier-Oblique",r,o],["Courier-BoldOblique",r,a],["Times-Roman",t,n],["Times-Bold",t,i],["Times-Italic",t,o],["Times-BoldItalic",t,a]],u=0,f=c.length;f>u;u++){var l=ae(c[u][0],c[u][1],c[u][2],s),h=c[u][0].split("-");oe(l,h[0],h[1]||"")}J.publish("addFonts",{fonts:O,dictionary:T})},ce=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(r){var n=r.stack||"";~n.indexOf(" at ")&&(n=n.split(" at ")[1]);var i="Error in function "+n.split("\n")[0].split("<")[0]+": "+r.message;if(!e.console)throw new Error(i);e.console.error(i,r),e.alert&&alert(i)}},t.foo.bar=t,t.foo},ue=function(e,t){var r,n,i,o,a,s,c,u,f;if(t=t||{},i=t.sourceEncoding||"Unicode",a=t.outputEncoding,(t.autoencode||a)&&O[l].metadata&&O[l].metadata[i]&&O[l].metadata[i].encoding&&(o=O[l].metadata[i].encoding,!a&&O[l].encoding&&(a=O[l].encoding),!a&&o.codePages&&(a=o.codePages[0]),"string"==typeof a&&(a=o[a]),a)){for(c=!1,s=[],r=0,n=e.length;n>r;r++)u=a[e.charCodeAt(r)],u?s.push(String.fromCharCode(u)):s.push(e[r]),s[r].charCodeAt(0)>>8&&(c=!0);e=s.join("")}for(r=e.length;void 0===c&&0!==r;)e.charCodeAt(r-1)>>8&&(c=!0),r--;if(!c)return e;for(s=t.noBOM?[]:[254,255],r=0,n=e.length;n>r;r++){if(u=e.charCodeAt(r),f=u>>8,f>>8)throw new Error("Character at position "+r+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(f),s.push(u-(f<<8))}return String.fromCharCode.apply(void 0,s)},fe=function(e,t){return ue(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},le=function(){W("/Producer (jsPDF "+r.version+")");for(var e in _)_.hasOwnProperty(e)&&_[e]&&W("/"+e.substr(0,1).toUpperCase()+e.substr(1)+" ("+fe(_[e])+")");var t=new Date,n=t.getTimezoneOffset(),i=0>n?"+":"-",o=Math.floor(Math.abs(n/60)),a=Math.abs(n%60),s=[i,V(o),"'",V(a),"'"].join("");W(["/CreationDate (D:",t.getFullYear(),V(t.getMonth()+1),V(t.getDate()),V(t.getHours()),V(t.getMinutes()),V(t.getSeconds()),s,")"].join(""))},he=function(){switch(W("/Type /Catalog"),W("/Pages 1 0 R"),v||(v="fullwidth"),v){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var e=""+v;"%"===e.substr(e.length-1)&&(v=parseInt(v)/100),"number"==typeof v&&W("/OpenAction [3 0 R /XYZ null null "+H(v)+"]")}switch(C||(C="continuous"),C){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}b&&W("/PageMode /"+b),J.publish("putCatalog")},de=function(){W("/Size "+(I+1)),W("/Root "+I+" 0 R"),W("/Info "+(I-1)+" 0 R")},pe=function(e,t){var r="string"==typeof t&&t.toLowerCase();if("string"==typeof e){var n=e.toLowerCase();o.hasOwnProperty(n)&&(e=o[n][0]/h,t=o[n][1]/h)}if(Array.isArray(e)&&(t=e[1],e=e[0]),r){switch(r.substr(0,1)){case"l":t>e&&(r="s");break;case"p":e>t&&(r="s")}"s"===r&&(d=e,e=t,t=d)}P=!0,B[++F]=[],L[F]={width:Number(e)||g,height:Number(t)||y},R[F]={},be(F)},ge=function(){pe.apply(this,arguments),W(H(E*h)+" w"),W(A),0!==U&&W(U+" J"),0!==N&&W(N+" j"),J.publish("addPage",{pageNumber:F})},ye=function(e){e>0&&F>=e&&(B.splice(e,1),L.splice(e,1),F--,p>F&&(p=F),this.setPage(p))},be=function(e){e>0&&F>=e&&(p=e,g=L[e].width,y=L[e].height)},ve=function(e,t){var r;switch(e=void 0!==e?e:O[l].fontName,t=void 0!==t?t:O[l].fontStyle,void 0!==e&&(e=e.toLowerCase()),e){case"sans-serif":case"verdana":case"arial":case"helvetica":e="helvetica";break;case"fixed":case"monospace":case"terminal":case"courier":e="courier";break;case"serif":case"cursive":case"fantasy":default:e="times"}try{r=T[e][t]}catch(n){}return r||(r=T.times[t],null==r&&(r=T.times.normal)),r},Ce=function(){P=!1,I=2,x=[],S=[],k=[],W("%PDF-"+n),Z(),ie(),ne(),X(),W("<<"),le(),W(">>"),W("endobj"),X(),W("<<"),he(),W(">>"),W("endobj");var e,t=M,r="0000000000";for(W("xref"),W("0 "+(I+1)),W(r+" 65535 f "),e=1;I>=e;e++){var i=S[e];W("function"==typeof i?(r+S[e]()).slice(-10)+" 00000 n ":(r+S[e]).slice(-10)+" 00000 n ")}return W("trailer"),W("<<"),de(),W(">>"),W("startxref"),W(t),W("%%EOF"),P=!0,x.join("\n")},me=function(e){var t="S";return"F"===e?t="f":"FD"===e||"DF"===e?t="B":("f"===e||"f*"===e||"B"===e||"B*"===e)&&(t=e),t},we=function(){for(var e=Ce(),t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r);t--;)n[t]=e.charCodeAt(t);return r},Ae=function(){return new Blob([we()],{type:"application/pdf"})},je=ce(function(t,r){var n="dataur"===(""+t).substr(0,6)?"data:application/pdf;base64,"+btoa(Ce()):0;switch(t){case void 0:return Ce();case"save":if(navigator.getUserMedia&&(void 0===e.URL||void 0===e.URL.createObjectURL))return G.output("dataurlnewwindow");saveAs(Ae(),r),"function"==typeof saveAs.unload&&e.setTimeout&&setTimeout(saveAs.unload,911);break;case"arraybuffer":return we();case"blob":return Ae();case"bloburi":case"bloburl":return e.URL&&e.URL.createObjectURL(Ae())||void 0;case"datauristring":case"dataurlstring":return n;case"dataurlnewwindow":var i=e.open(n);if(i||"undefined"==typeof safari)return i;case"datauri":case"dataurl":return e.document.location.href=n;default:throw new Error('Output type "'+t+'" is not supported.')}});switch(s){case"pt":h=1;break;case"mm":h=72/25.4000508;break;case"cm":h=72/2.54000508;break;case"in":h=72;break;case"px":h=96/72;break;case"pc":h=12;break;case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+s}G.internal={pdfEscape:fe,getStyle:me,getFont:function(){return O[ve.apply(G,arguments)]},getFontSize:function(){return j},getLineHeight:function(){return j*D},write:function(e){W(1===arguments.length?e:Array.prototype.join.call(arguments," "))},getCoordinateString:function(e){return H(e*h)},getVerticalCoordinateString:function(e){return H((y-e)*h)},collections:{},newObject:X,newAdditionalObject:Y,newObjectDeferred:q,newObjectDeferredBegin:K,putStream:Q,events:J,scaleFactor:h,pageSize:{get width(){return g},get height(){return y}},output:function(e,t){return je(e,t)},getNumberOfPages:function(){return B.length-1},pages:B,out:W,f2:H,getPageInfo:function(e){var t=2*(e-1)+3;return{objId:t,pageNumber:e,pageContext:R[e]}},getCurrentPageInfo:function(){var e=2*(p-1)+3;return{objId:e,pageNumber:p,pageContext:R[p]}}},G.addPage=function(){return ge.apply(this,arguments),this},G.setPage=function(){return be.apply(this,arguments),this},G.insertPage=function(e){return this.addPage(),this.movePage(p,e),this},G.movePage=function(e,t){if(e>t){for(var r=B[e],n=L[e],i=R[e],o=e;o>t;o--)B[o]=B[o-1],L[o]=L[o-1],R[o]=R[o-1];B[t]=r,L[t]=n,R[t]=i,this.setPage(t)}else if(t>e){for(var r=B[e],n=L[e],i=R[e],o=e;t>o;o++)B[o]=B[o+1],L[o]=L[o+1],R[o]=R[o+1];B[t]=r,L[t]=n,R[t]=i,this.setPage(t)}return this},G.deletePage=function(){return ye.apply(this,arguments),this},G.setDisplayMode=function(e,t,r){return v=e,C=t,b=r,this},G.text=function(e,t,r,n,o,a){function s(e){return e=e.split("	").join(Array(f.TabLen||9).join(" ")),fe(e,n)}"number"==typeof e&&(d=r,r=t,t=e,e=d),"string"==typeof e&&(e=e.match(/[\n\r]/)?e.split(/\r\n|\r|\n/g):[e]),"string"==typeof o&&(a=o,o=null),"string"==typeof n&&(a=n,n=null),"number"==typeof n&&(o=n,n=null);var c,u="",p="Td";if(o){o*=Math.PI/180;var g=Math.cos(o),b=Math.sin(o);u=[H(g),H(b),H(-1*b),H(g),""].join(" "),p="Tm"}n=n||{},"noBOM"in n||(n.noBOM=!0),"autoencode"in n||(n.autoencode=!0);var v="",C=this.internal.getCurrentPageInfo().pageContext;if(!0===n.stroke?C.lastTextWasStroke!==!0&&(v="1 Tr\n",C.lastTextWasStroke=!0):(C.lastTextWasStroke&&(v="0 Tr\n"),C.lastTextWasStroke=!1),"undefined"==typeof this._runningPageHeight&&(this._runningPageHeight=0),"string"==typeof e)e=s(e);else{if(!(e instanceof Array))throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');for(var m=e.concat(),A=[],E=m.length;E--;)A.push(s(m.shift()));var I=Math.ceil((y-r-this._runningPageHeight)*h/(j*D));if(I>=0&&I<A.length+1,a){var P,S,O,T=j*D,F=e.map(function(e){return this.getStringUnitWidth(e)*j/h},this);if(O=Math.max.apply(Math,F),"center"===a)P=t-O/2,t-=F[0]/2;else{if("right"!==a)throw new Error('Unrecognized alignment option, use "center" or "right".');P=t-O,t-=F[0]}for(S=t,e=A[0]+") Tj\n",i=1,E=A.length;i<E;i++){var B=O-F[i];"center"===a&&(B/=2),e+=P-S+B+" -"+T+" Td ("+A[i],S=P+B,i<E-1&&(e+=") Tj\n")}}else e=A.join(") Tj\nT* (")}var R;return c||(R=H((y-r)*h)),W("BT\n/"+l+" "+j+" Tf\n"+j*D+" TL\n"+v+w+"\n"+u+H(t*h)+" "+R+" "+p+"\n("+e+") Tj\nET"),c&&this.text(c,t,r),this},G.lstext=function(e,t,r,n){for(var i=0,o=e.length;o>i;i++,t+=n)this.text(e[i],t,r)},G.line=function(e,t,r,n){return this.lines([[r-e,n-t]],e,t)},G.clip=function(){W("W"),W("S")},G.lines=function(e,t,r,n,i,o){var a,s,c,u,f,l,p,g,b,v,C;for("number"==typeof e&&(d=r,r=t,t=e,e=d),n=n||[1,1],W(z(t*h)+" "+z((y-r)*h)+" m "),a=n[0],s=n[1],u=e.length,v=t,C=r,c=0;u>c;c++)f=e[c],2===f.length?(v=f[0]*a+v,C=f[1]*s+C,W(z(v*h)+" "+z((y-C)*h)+" l")):(l=f[0]*a+v,p=f[1]*s+C,g=f[2]*a+v,b=f[3]*s+C,v=f[4]*a+v,C=f[5]*s+C,W(z(l*h)+" "+z((y-p)*h)+" "+z(g*h)+" "+z((y-b)*h)+" "+z(v*h)+" "+z((y-C)*h)+" c"));return o&&W(" h"),null!==i&&W(me(i)),this},G.rect=function(e,t,r,n,i){me(i);return W([H(e*h),H((y-t)*h),H(r*h),H(-n*h),"re"].join(" ")),null!==i&&W(me(i)),this},G.triangle=function(e,t,r,n,i,o,a){return this.lines([[r-e,n-t],[i-r,o-n],[e-i,t-o]],e,t,[1,1],a,!0),this},G.roundedRect=function(e,t,r,n,i,o,a){var s=4/3*(Math.SQRT2-1);return this.lines([[r-2*i,0],[i*s,0,i,o-o*s,i,o],[0,n-2*o],[0,o*s,-(i*s),o,-i,o],[-r+2*i,0],[-(i*s),0,-i,-(o*s),-i,-o],[0,-n+2*o],[0,-(o*s),i*s,-o,i,-o]],e+i,t,[1,1],a),this},G.ellipse=function(e,t,r,n,i){var o=4/3*(Math.SQRT2-1)*r,a=4/3*(Math.SQRT2-1)*n;return W([H((e+r)*h),H((y-t)*h),"m",H((e+r)*h),H((y-(t-a))*h),H((e+o)*h),H((y-(t-n))*h),H(e*h),H((y-(t-n))*h),"c"].join(" ")),W([H((e-o)*h),H((y-(t-n))*h),H((e-r)*h),H((y-(t-a))*h),H((e-r)*h),H((y-t)*h),"c"].join(" ")),W([H((e-r)*h),H((y-(t+a))*h),H((e-o)*h),H((y-(t+n))*h),H(e*h),H((y-(t+n))*h),"c"].join(" ")),W([H((e+o)*h),H((y-(t+n))*h),H((e+r)*h),H((y-(t+a))*h),H((e+r)*h),H((y-t)*h),"c"].join(" ")),null!==i&&W(me(i)),this},G.circle=function(e,t,r,n){return this.ellipse(e,t,r,r,n)},G.setProperties=function(e){for(var t in _)_.hasOwnProperty(t)&&e[t]&&(_[t]=e[t]);return this},G.setFontSize=function(e){return j=e,this},G.setFont=function(e,t){return l=ve(e,t),this},G.setFontStyle=G.setFontType=function(e){return l=ve(void 0,e),this},G.getFontList=function(){var e,t,r,n={};for(e in T)if(T.hasOwnProperty(e)){n[e]=r=[];for(t in T[e])T[e].hasOwnProperty(t)&&r.push(t)}return n},G.addFont=function(e,t,r){ae(e,t,r,"StandardEncoding")},G.setLineWidth=function(e){return W((e*h).toFixed(2)+" w"),this},G.setDrawColor=function(e,t,r,n){var i;return i=void 0===t||void 0===n&&e===t===r?"string"==typeof e?e+" G":H(e/255)+" G":void 0===n?"string"==typeof e?[e,t,r,"RG"].join(" "):[H(e/255),H(t/255),H(r/255),"RG"].join(" "):"string"==typeof e?[e,t,r,n,"K"].join(" "):[H(e),H(t),H(r),H(n),"K"].join(" "),W(i),this},G.setFillColor=function(e,t,r,n){var i;return void 0===t||void 0===n&&e===t===r?i="string"==typeof e?e+" g":H(e/255)+" g":void 0===n||"object"==typeof n?(i="string"==typeof e?[e,t,r,"rg"].join(" "):[H(e/255),H(t/255),H(r/255),"rg"].join(" "),n&&0===n.a&&(i=["255","255","255","rg"].join(" "))):i="string"==typeof e?[e,t,r,n,"k"].join(" "):[H(e),H(t),H(r),H(n),"k"].join(" "),W(i),this},G.setTextColor=function(e,t,r){if("string"==typeof e&&/^#[0-9A-Fa-f]{6}$/.test(e)){var n=parseInt(e.substr(1),16);e=n>>16&255,t=n>>8&255,r=255&n}return w=0===e&&0===t&&0===r||"undefined"==typeof t?z(e/255)+" g":[z(e/255),z(t/255),z(r/255),"rg"].join(" "),this},G.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},G.setLineCap=function(e){var t=this.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return U=t,W(t+" J"),this},G.setLineJoin=function(e){var t=this.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return N=t,W(t+" j"),this},G.output=je,G.save=function(e){G.output("save",e)};for(var De in r.API)r.API.hasOwnProperty(De)&&("events"===De&&r.API.events.length?!function(e,t){var r,n,i;for(i=t.length-1;-1!==i;i--)r=t[i][0],n=t[i][1],e.subscribe.apply(e,[r].concat("function"==typeof n?[n]:n))}(J,r.API.events):G[De]=r.API[De]);return se(),l="F1",ge(c,a),J.publish("initialized"),G}var n="1.3",o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};return r.API={events:[]},r.version="1.0.0-trunk","function"==typeof define&&define.amd?define("jsPDF",function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:e.jsPDF=r,r}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this);!function(e){"use strict";var t="addImage_",r=["jpeg","jpg","png"],n=function(e){var t=this.internal.newObject(),r=this.internal.write,i=this.internal.putStream;if(e.n=t,r("<</Type /XObject"),r("/Subtype /Image"),r("/Width "+e.w),r("/Height "+e.h),e.cs===this.color_spaces.INDEXED?r("/ColorSpace [/Indexed /DeviceRGB "+(e.pal.length/3-1)+" "+("smask"in e?t+2:t+1)+" 0 R]"):(r("/ColorSpace /"+e.cs),e.cs===this.color_spaces.DEVICE_CMYK&&r("/Decode [1 0 1 0 1 0 1 0]")),r("/BitsPerComponent "+e.bpc),"f"in e&&r("/Filter /"+e.f),"dp"in e&&r("/DecodeParms <<"+e.dp+">>"),"trns"in e&&e.trns.constructor==Array){for(var o="",a=0,s=e.trns.length;s>a;a++)o+=e.trns[a]+" "+e.trns[a]+" ";r("/Mask ["+o+"]")}if("smask"in e&&r("/SMask "+(t+1)+" 0 R"),r("/Length "+e.data.length+">>"),i(e.data),r("endobj"),"smask"in e){var c="/Predictor 15 /Colors 1 /BitsPerComponent "+e.bpc+" /Columns "+e.w,u={w:e.w,h:e.h,cs:"DeviceGray",bpc:e.bpc,dp:c,data:e.smask};"f"in e&&(u.f=e.f),n.call(this,u)}e.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),r("<< /Length "+e.pal.length+">>"),i(this.arrayBufferToBinaryString(new Uint8Array(e.pal))),r("endobj"))},i=function(){var e=this.internal.collections[t+"images"];for(var r in e)n.call(this,e[r])},o=function(){var e,r=this.internal.collections[t+"images"],n=this.internal.write;for(var i in r)e=r[i],n("/I"+e.i,e.n,"0","R")},a=function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:e.image_compression.NONE},s=function(){var e=this.internal.collections[t+"images"];return e||(this.internal.collections[t+"images"]=e={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o)),e},c=function(e){var t=0;return e&&(t=Object.keys?Object.keys(e).length:function(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&t++;return t}(e)),t},u=function(e){return"undefined"==typeof e||null===e},f=function(t){return"string"==typeof t&&e.sHashCode(t)},l=function(e){return-1===r.indexOf(e)},h=function(t){return"function"!=typeof e["process"+t.toUpperCase()]},d=function(e){return"object"==typeof e&&1===e.nodeType},p=function(e,t,r){if("IMG"===e.nodeName&&e.hasAttribute("src")){var n=""+e.getAttribute("src");if(!r&&0===n.indexOf("data:image/"))return n;!t&&/\.png(?:[?#].*)?$/i.test(n)&&(t="png")}if("CANVAS"===e.nodeName)var i=e;else{var i=document.createElement("canvas");i.width=e.clientWidth||e.width,i.height=e.clientHeight||e.height;var o=i.getContext("2d");if(!o)throw"addImage requires canvas to be supported by browser.";if(r){var a,s,c,u,f,l,h,d,p=Math.PI/180;"object"==typeof r&&(a=r.x,s=r.y,c=r.bg,r=r.angle),d=r*p,u=Math.abs(Math.cos(d)),f=Math.abs(Math.sin(d)),l=i.width,h=i.height,i.width=h*f+l*u,i.height=h*u+l*f,isNaN(a)&&(a=i.width/2),isNaN(s)&&(s=i.height/2),o.clearRect(0,0,i.width,i.height),o.fillStyle=c||"white",o.fillRect(0,0,i.width,i.height),o.save(),o.translate(a,s),o.rotate(d),o.drawImage(e,-(l/2),-(h/2)),o.rotate(-d),o.translate(-a,-s),o.restore()}else o.drawImage(e,0,0,i.width,i.height)}return i.toDataURL("png"==(""+t).toLowerCase()?"image/png":"image/jpeg")},g=function(e,t){var r;if(t)for(var n in t)if(e===t[n].alias){r=t[n];break}return r},y=function(e,t,r){return e||t||(e=-96,t=-96),0>e&&(e=-1*r.w*72/e/this.internal.scaleFactor),0>t&&(t=-1*r.h*72/t/this.internal.scaleFactor),0===e&&(e=t*r.w/r.h),0===t&&(t=e*r.h/r.w),[e,t]},b=function(e,t,r,n,i,o,a){var s=y.call(this,r,n,i),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;r=s[0],n=s[1],a[o]=i,this.internal.write("q",c(r),"0 0",c(n),c(e),u(t+n),"cm /I"+i.i,"Do Q")};e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPERATION:"Seperation",DEVICE_N:"DeviceN"},e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},e.sHashCode=function(e){return Array.prototype.reduce&&e.split("").reduce(function(e,t){return e=(e<<5)-e+t.charCodeAt(0),e&e},0)},e.isString=function(e){return"string"==typeof e},e.extractInfoFromBase64DataURI=function(e){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(e)},e.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},e.isArrayBuffer=function(e){return this.supportsArrayBuffer()?e instanceof ArrayBuffer:!1},e.isArrayBufferView=function(e){return this.supportsArrayBuffer()?"undefined"==typeof Uint32Array?!1:e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array:!1},e.binaryStringToUint8Array=function(e){for(var t=e.length,r=new Uint8Array(t),n=0;t>n;n++)r[n]=e.charCodeAt(n);return r},e.arrayBufferToBinaryString=function(e){this.isArrayBuffer(e)&&(e=new Uint8Array(e));for(var t="",r=e.byteLength,n=0;r>n;n++)t+=String.fromCharCode(e[n]);return t},e.arrayBufferToBase64=function(e){for(var t,r,n,i,o,a="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=new Uint8Array(e),u=c.byteLength,f=u%3,l=u-f,h=0;l>h;h+=3)o=c[h]<<16|c[h+1]<<8|c[h+2],t=(16515072&o)>>18,r=(258048&o)>>12,n=(4032&o)>>6,i=63&o,a+=s[t]+s[r]+s[n]+s[i];return 1==f?(o=c[l],t=(252&o)>>2,r=(3&o)<<4,a+=s[t]+s[r]+"=="):2==f&&(o=c[l]<<8|c[l+1],t=(64512&o)>>10,r=(1008&o)>>4,n=(15&o)<<2,a+=s[t]+s[r]+s[n]+"="),a},e.createImageInfo=function(e,t,r,n,i,o,a,s,c,u,f,l){var h={alias:s,w:t,h:r,cs:n,bpc:i,i:a,data:e};return o&&(h.f=o),c&&(h.dp=c),u&&(h.trns=u),f&&(h.pal=f),l&&(h.smask=l),h},e.addImage=function(e,t,n,i,o,y,v,C,m){if("string"!=typeof t){var w=y;y=o,o=i,i=n,n=t,t=w}if("object"==typeof e&&!d(e)&&"imageData"in e){var A=e;e=A.imageData,t=A.format||t,n=A.x||n||0,i=A.y||i||0,o=A.w||o,y=A.h||y,v=A.alias||v,C=A.compression||C,m=A.rotation||A.angle||m}if(isNaN(n)||isNaN(i))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addImage");var j,D=s.call(this);if(!(j=g(e,D))){var E;if(d(e)&&(e=p(e,t,m)),u(v)&&(v=f(e)),!(j=g(v,D))){if(this.isString(e)){var I=this.extractInfoFromBase64DataURI(e);I?(t=I[2],e=atob(I[3])):137===e.charCodeAt(0)&&80===e.charCodeAt(1)&&78===e.charCodeAt(2)&&71===e.charCodeAt(3)&&(t="png")}if(t=(t||"JPEG").toLowerCase(),l(t))throw new Error("addImage currently only supports formats "+r+", not '"+t+"'");if(h(t))throw new Error("please ensure that the plugin for '"+t+"' support is added");if(this.supportsArrayBuffer()&&(E=e,e=this.binaryStringToUint8Array(e)),j=this["process"+t.toUpperCase()](e,c(D),v,a(C),E),!j)throw new Error("An unkwown error occurred whilst processing the image")}}return b.call(this,n,i,o,y,j,j.i,D),this};var v=function(e){var t,r,n;if(255===!e.charCodeAt(0)||216===!e.charCodeAt(1)||255===!e.charCodeAt(2)||224===!e.charCodeAt(3)||!e.charCodeAt(6)==="J".charCodeAt(0)||!e.charCodeAt(7)==="F".charCodeAt(0)||!e.charCodeAt(8)==="I".charCodeAt(0)||!e.charCodeAt(9)==="F".charCodeAt(0)||0===!e.charCodeAt(10))throw new Error("getJpegSize requires a binary string jpeg file");for(var i=256*e.charCodeAt(4)+e.charCodeAt(5),o=4,a=e.length;a>o;){if(o+=i,255!==e.charCodeAt(o))throw new Error("getJpegSize could not find the size of the image");if(192===e.charCodeAt(o+1)||193===e.charCodeAt(o+1)||194===e.charCodeAt(o+1)||195===e.charCodeAt(o+1)||196===e.charCodeAt(o+1)||197===e.charCodeAt(o+1)||198===e.charCodeAt(o+1)||199===e.charCodeAt(o+1))return r=256*e.charCodeAt(o+5)+e.charCodeAt(o+6),t=256*e.charCodeAt(o+7)+e.charCodeAt(o+8),n=e.charCodeAt(o+9),[t,r,n];o+=2,i=256*e.charCodeAt(o)+e.charCodeAt(o+1)}},C=function(e){var t=e[0]<<8|e[1];if(65496!==t)throw new Error("Supplied data is not a JPEG");for(var r,n,i,o,a=e.length,s=(e[4]<<8)+e[5],c=4;a>c;){if(c+=s,r=m(e,c),s=(r[2]<<8)+r[3],(192===r[1]||194===r[1])&&255===r[0]&&s>7)return r=m(e,c+5),n=(r[2]<<8)+r[3],i=(r[0]<<8)+r[1],o=r[4],{width:n,height:i,numcomponents:o};c+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")},m=function(e,t){return e.subarray(t,t+5)};e.processJPEG=function(e,t,r,n,i){var o,a=this.color_spaces.DEVICE_RGB,s=this.decode.DCT_DECODE,c=8;return this.isString(e)?(o=v(e),this.createImageInfo(e,o[0],o[1],1==o[3]?this.color_spaces.DEVICE_GRAY:a,c,s,t,r)):(this.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.isArrayBufferView(e)?(o=C(e),e=i||this.arrayBufferToBinaryString(e),this.createImageInfo(e,o.width,o.height,1==o.numcomponents?this.color_spaces.DEVICE_GRAY:a,c,s,t,r)):null)},e.processJPG=function(){return this.processJPEG.apply(this,arguments)}}(jsPDF.API);

// png plugin
!function(r){"use strict";var e=function(){return"function"!=typeof PNG||"function"!=typeof FlateStream},t=function(e){return e!==r.image_compression.NONE&&n()},n=function(){var r="function"==typeof Deflater;if(!r)throw new Error("requires deflate.js for compression");return r},i=function(e,t,n,i){var f=5,g=u;switch(i){case r.image_compression.FAST:f=3,g=l;break;case r.image_compression.MEDIUM:f=6,g=h;break;case r.image_compression.SLOW:f=9,g=c}e=s(e,t,n,g);var y=new Uint8Array(o(f)),d=a(e),p=new Deflater(f),w=p.append(e),A=p.flush(),v=y.length+w.length+A.length,B=new Uint8Array(v+4);return B.set(y),B.set(w,y.length),B.set(A,y.length+w.length),B[v++]=d>>>24&255,B[v++]=d>>>16&255,B[v++]=d>>>8&255,B[v++]=255&d,r.arrayBufferToBinaryString(B)},o=function(r,e){var t=8,n=Math.LOG2E*Math.log(32768)-8,i=n<<4|t,o=i<<8,a=Math.min(3,(e-1&255)>>1);return o|=a<<6,o|=0,o+=31-o%31,[i,255&o&255]},a=function(r,e){for(var t,n=1,i=65535&n,o=n>>>16&65535,a=r.length,s=0;a>0;){t=a>e?e:a,a-=t;do i+=r[s++],o+=i;while(--t);i%=65521,o%=65521}return(o<<16|i)>>>0},s=function(r,e,t,n){for(var i,o,a,s=r.length/e,f=new Uint8Array(r.length+s),l=y(),u=0;s>u;u++){if(a=u*e,i=r.subarray(a,a+e),n)f.set(n(i,t,o),a+u);else{for(var h=0,c=l.length,g=[];c>h;h++)g[h]=l[h](i,t,o);var p=d(g.concat());f.set(g[p],a+u)}o=i}return f},f=function(r,e,t){var n=Array.apply([],r);return n.unshift(0),n},l=function(r,e,t){var n,i=[],o=0,a=r.length;for(i[0]=1;a>o;o++)n=r[o-e]||0,i[o+1]=r[o]-n+256&255;return i},u=function(r,e,t){var n,i=[],o=0,a=r.length;for(i[0]=2;a>o;o++)n=t&&t[o]||0,i[o+1]=r[o]-n+256&255;return i},h=function(r,e,t){var n,i,o=[],a=0,s=r.length;for(o[0]=3;s>a;a++)n=r[a-e]||0,i=t&&t[a]||0,o[a+1]=r[a]+256-(n+i>>>1)&255;return o},c=function(r,e,t){var n,i,o,a,s=[],f=0,l=r.length;for(s[0]=4;l>f;f++)n=r[f-e]||0,i=t&&t[f]||0,o=t&&t[f-e]||0,a=g(n,i,o),s[f+1]=r[f]-a+256&255;return s},g=function(r,e,t){var n=r+e-t,i=Math.abs(n-r),o=Math.abs(n-e),a=Math.abs(n-t);return o>=i&&a>=i?r:a>=o?e:t},y=function(){return[f,l,u,h,c]},d=function(r){for(var e,t,n,i=0,o=r.length;o>i;)e=p(r[i].slice(1)),(t>e||!t)&&(t=e,n=i),i++;return n},p=function(r){for(var e=0,t=r.length,n=0;t>e;)n+=Math.abs(r[e++]);return n};r.processPNG=function(r,n,o,a,s){var f,l,u,h,c,g,y=this.color_spaces.DEVICE_RGB,d=this.decode.FLATE_DECODE,p=8;if(this.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.isArrayBufferView(r)){if(e())throw new Error("PNG support requires png.js and zlib.js");if(f=new PNG(r),r=f.imgData,p=f.bits,y=f.colorSpace,h=f.colors,-1!==[4,6].indexOf(f.colorType)){if(8===f.bits)for(var w,A,v=32==f.pixelBitlength?new Uint32Array(f.decodePixels().buffer):16==f.pixelBitlength?new Uint16Array(f.decodePixels().buffer):new Uint8Array(f.decodePixels().buffer),B=v.length,m=new Uint8Array(B*f.colors),b=new Uint8Array(B),E=f.pixelBitlength-f.bits,P=0,x=0;B>P;P++){for(w=v[P],A=0;E>A;)m[x++]=w>>>A&255,A+=f.bits;b[P]=w>>>A&255}if(16===f.bits){for(var w,v=new Uint32Array(f.decodePixels().buffer),B=v.length,m=new Uint8Array(B*(32/f.pixelBitlength)*f.colors),b=new Uint8Array(B*(32/f.pixelBitlength)),U=f.colors>1,P=0,x=0,D=0;B>P;)w=v[P++],m[x++]=w>>>0&255,U&&(m[x++]=w>>>16&255,w=v[P++],m[x++]=w>>>0&255),b[D++]=w>>>16&255;p=8}t(a)?(r=i(m,f.width*f.colors,f.colors,a),g=i(b,f.width,1,a)):(r=m,g=b,d=null)}if(3===f.colorType&&(y=this.color_spaces.INDEXED,c=f.palette,f.transparency.indexed)){for(var C=f.transparency.indexed,M=0,P=0,B=C.length;B>P;++P)M+=C[P];if(M/=255,M===B-1&&-1!==C.indexOf(0))u=[C.indexOf(0)];else if(M!==B){for(var v=f.decodePixels(),b=new Uint8Array(v.length),P=0,B=v.length;B>P;P++)b[P]=C[v[P]];g=i(b,f.width,1)}}return l=d===this.decode.FLATE_DECODE?"/Predictor 15 /Colors "+h+" /BitsPerComponent "+p+" /Columns "+f.width:"/Colors "+h+" /BitsPerComponent "+p+" /Columns "+f.width,(this.isArrayBuffer(r)||this.isArrayBufferView(r))&&(r=this.arrayBufferToBinaryString(r)),(g&&this.isArrayBuffer(g)||this.isArrayBufferView(g))&&(g=this.arrayBufferToBinaryString(g)),this.createImageInfo(r,f.width,f.height,y,p,d,n,o,l,u,c,g)}throw new Error("Unsupported PNG image data, try using JPEG instead.")}}(jsPDF.API);
// png.js
!function(t){var e;e=function(){function e(t){var e,a,i,s,r,n,h,o,d,c,p,l,f,u,m;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},n=null;;){switch(e=this.readUInt32(),c=function(){var t,e;for(e=[],h=t=0;4>t;h=++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":n&&this.animation.frames.push(n),this.pos+=4,n={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},r=this.readUInt16(),s=this.readUInt16()||100,n.delay=1e3*r/s,n.disposeOp=this.data[this.pos++],n.blendOp=this.data[this.pos++],n.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,e-=4),t=(null!=n?n.data:void 0)||this.imgData,h=f=0;e>=0?e>f:f>e;h=e>=0?++f:--f)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(i=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>i)throw new Error("More transparent colors than palette size");if(p=i-this.transparency.indexed.length,p>0)for(h=u=0;p>=0?p>u:u>p;h=p>=0?++u:--u)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":l=this.read(e),o=l.indexOf(0),d=String.fromCharCode.apply(String,l.slice(0,o)),this.text[d]=String.fromCharCode.apply(String,l.slice(o+1));break;case"IEND":return n&&this.animation.frames.push(n),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(m=this.colorType)||6===m,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}var a,i,s,r,n,h,o,d;e.load=function(t,a,i){var s;return"function"==typeof a&&(i=a),s=new XMLHttpRequest,s.open("GET",t,!0),s.responseType="arraybuffer",s.onload=function(){var t,r;return t=new Uint8Array(s.response||s.mozResponseArrayBuffer),r=new e(t),"function"==typeof(null!=a?a.getContext:void 0)&&r.render(a),"function"==typeof i?i(r):void 0},s.send(null)},r=0,s=1,n=2,i=0,a=1,e.prototype.read=function(t){var e,a,i;for(i=[],e=a=0;t>=0?t>a:a>t;e=t>=0?++a:--a)i.push(this.data[this.pos++]);return i},e.prototype.readUInt32=function(){var t,e,a,i;return t=this.data[this.pos++]<<24,e=this.data[this.pos++]<<16,a=this.data[this.pos++]<<8,i=this.data[this.pos++],t|e|a|i},e.prototype.readUInt16=function(){var t,e;return t=this.data[this.pos++]<<8,e=this.data[this.pos++],t|e},e.prototype.decodePixels=function(t){var e,a,i,s,r,n,h,o,d,c,p,l,f,u,m,g,y,w,v,I,b,x,D;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);for(t=new FlateStream(t),t=t.getBytes(),l=this.pixelBitlength/8,g=l*this.width,f=new Uint8Array(g*this.height),n=t.length,m=0,u=0,a=0;n>u;){switch(t[u++]){case 0:for(s=v=0;g>v;s=v+=1)f[a++]=t[u++];break;case 1:for(s=I=0;g>I;s=I+=1)e=t[u++],r=l>s?0:f[a-l],f[a++]=(e+r)%256;break;case 2:for(s=b=0;g>b;s=b+=1)e=t[u++],i=(s-s%l)/l,y=m&&f[(m-1)*g+i*l+s%l],f[a++]=(y+e)%256;break;case 3:for(s=x=0;g>x;s=x+=1)e=t[u++],i=(s-s%l)/l,r=l>s?0:f[a-l],y=m&&f[(m-1)*g+i*l+s%l],f[a++]=(e+Math.floor((r+y)/2))%256;break;case 4:for(s=D=0;g>D;s=D+=1)e=t[u++],i=(s-s%l)/l,r=l>s?0:f[a-l],0===m?y=w=0:(y=f[(m-1)*g+i*l+s%l],w=i&&f[(m-1)*g+(i-1)*l+s%l]),h=r+y-w,o=Math.abs(h-r),c=Math.abs(h-y),p=Math.abs(h-w),d=c>=o&&p>=o?r:p>=c?y:w,f[a++]=(e+d)%256;break;default:throw new Error("Invalid filter algorithm: "+t[u-1])}m++}return f},e.prototype.decodePalette=function(){var t,e,a,i,s,r,n,h,o,d;for(i=this.palette,n=this.transparency.indexed||[],r=new Uint8Array((n.length||0)+i.length),s=0,a=i.length,t=0,e=h=0,o=i.length;o>h;e=h+=3)r[s++]=i[e],r[s++]=i[e+1],r[s++]=i[e+2],r[s++]=null!=(d=n[t++])?d:255;return r},e.prototype.copyToImageData=function(t,e){var a,i,s,r,n,h,o,d,c,p,l;if(i=this.colors,c=null,a=this.hasAlphaChannel,this.palette.length&&(c=null!=(l=this._decodedPalette)?l:this._decodedPalette=this.decodePalette(),i=4,a=!0),s=t.data||t,d=s.length,n=c||e,r=h=0,1===i)for(;d>r;)o=c?4*e[r/4]:h,p=n[o++],s[r++]=p,s[r++]=p,s[r++]=p,s[r++]=a?n[o++]:255,h=o;else for(;d>r;)o=c?4*e[r/4]:h,s[r++]=n[o++],s[r++]=n[o++],s[r++]=n[o++],s[r++]=a?n[o++]:255,h=o},e.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};try{o=t.document.createElement("canvas"),d=o.getContext("2d")}catch(c){return-1}return h=function(t){var e;return d.width=t.width,d.height=t.height,d.clearRect(0,0,t.width,t.height),d.putImageData(t,0,0),e=new Image,e.src=o.toDataURL(),e},e.prototype.decodeFrames=function(t){var e,a,i,s,r,n,o,d;if(this.animation){for(o=this.animation.frames,d=[],a=r=0,n=o.length;n>r;a=++r)e=o[a],i=t.createImageData(e.width,e.height),s=this.decodePixels(new Uint8Array(e.data)),this.copyToImageData(i,s),e.imageData=i,d.push(e.image=h(i));return d}},e.prototype.renderFrame=function(t,e){var a,r,h;return r=this.animation.frames,a=r[e],h=r[e-1],0===e&&t.clearRect(0,0,this.width,this.height),(null!=h?h.disposeOp:void 0)===s?t.clearRect(h.xOffset,h.yOffset,h.width,h.height):(null!=h?h.disposeOp:void 0)===n&&t.putImageData(h.imageData,h.xOffset,h.yOffset),a.blendOp===i&&t.clearRect(a.xOffset,a.yOffset,a.width,a.height),t.drawImage(a.image,a.xOffset,a.yOffset)},e.prototype.animate=function(t){var e,a,i,s,r,n,h=this;return a=0,n=this.animation,s=n.numFrames,i=n.frames,r=n.numPlays,(e=function(){var n,o;return n=a++%s,o=i[n],h.renderFrame(t,n),s>1&&r>a/s?h.animation._timeout=setTimeout(e,o.delay):void 0})()},e.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},e.prototype.render=function(t){var e,a;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(a=e.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),e.putImageData(a,0,0))},e}(),t.PNG=e}("undefined"!=typeof window&&window||this);

// zlib.js
var DecodeStream=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(e){var t=this.buffer,r=t?t.byteLength:0;if(r>e)return t;for(var i=512;e>i;)i<<=1;for(var s=new Uint8Array(i),f=0;r>f;++f)s[f]=t[f];return this.buffer=s},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var r=t+e;!this.eof&&this.bufferLength<r;)this.readBlock();var i=this.bufferLength;r>i&&(r=i)}else{for(;!this.eof;)this.readBlock();var r=this.bufferLength}return this.pos=r,this.buffer.subarray(t,r)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,r){for(var i=e+t;this.bufferLength<=i&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,r)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}(),FlateStream=function(){function e(e){throw new Error(e)}function t(t){var r=0,i=t[r++],s=t[r++];(-1==i||-1==s)&&e("Invalid header in flate stream"),8!=(15&i)&&e("Unknown compression method in flate stream"),((i<<8)+s)%31!=0&&e("Bad FCHECK in flate stream"),32&s&&e("FDICT bit set in flate stream"),this.bytes=t,this.bytesPos=r,this.codeSize=0,this.codeBuf=0,DecodeStream.call(this)}if("undefined"==typeof Uint32Array)return void 0;var r=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),s=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),f=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],n=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return t.prototype=Object.create(DecodeStream.prototype),t.prototype.getBits=function(t){for(var r,i=this.codeSize,s=this.codeBuf,f=this.bytes,n=this.bytesPos;t>i;)"undefined"==typeof(r=f[n++])&&e("Bad encoding in flate stream"),s|=r<<i,i+=8;return r=s&(1<<t)-1,this.codeBuf=s>>t,this.codeSize=i-=t,this.bytesPos=n,r},t.prototype.getCode=function(t){for(var r=t[0],i=t[1],s=this.codeSize,f=this.codeBuf,n=this.bytes,o=this.bytesPos;i>s;){var a;"undefined"==typeof(a=n[o++])&&e("Bad encoding in flate stream"),f|=a<<s,s+=8}var h=r[f&(1<<i)-1],u=h>>16,d=65535&h;return(0==s||u>s||0==u)&&e("Bad encoding in flate stream"),this.codeBuf=f>>u,this.codeSize=s-u,this.bytesPos=o,d},t.prototype.generateHuffmanTable=function(e){for(var t=e.length,r=0,i=0;t>i;++i)e[i]>r&&(r=e[i]);for(var s=1<<r,f=new Uint32Array(s),n=1,o=0,a=2;r>=n;++n,o<<=1,a<<=1)for(var h=0;t>h;++h)if(e[h]==n){for(var u=0,d=o,i=0;n>i;++i)u=u<<1|1&d,d>>=1;for(var i=u;s>i;i+=a)f[i]=n<<16|h;++o}return[f,r]},t.prototype.readBlock=function(){function t(e,t,r,i,s){for(var f=e.getBits(r)+i;f-->0;)t[w++]=s}var o=this.getBits(3);if(1&o&&(this.eof=!0),o>>=1,0==o){var a,h=this.bytes,u=this.bytesPos;"undefined"==typeof(a=h[u++])&&e("Bad block header in flate stream");var d=a;"undefined"==typeof(a=h[u++])&&e("Bad block header in flate stream"),d|=a<<8,"undefined"==typeof(a=h[u++])&&e("Bad block header in flate stream");var c=a;"undefined"==typeof(a=h[u++])&&e("Bad block header in flate stream"),c|=a<<8,c!=(65535&~d)&&e("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var l=this.bufferLength,b=this.ensureBuffer(l+d),g=l+d;this.bufferLength=g;for(var v=l;g>v;++v){if("undefined"==typeof(a=h[u++])){this.eof=!0;break}b[v]=a}return void(this.bytesPos=u)}var y,B;if(1==o)y=f,B=n;else if(2==o){for(var p=this.getBits(5)+257,m=this.getBits(5)+1,k=this.getBits(4)+4,S=Array(r.length),w=0;k>w;)S[r[w++]]=this.getBits(3);for(var C=this.generateHuffmanTable(S),L=0,w=0,A=p+m,U=new Array(A);A>w;){var P=this.getCode(C);16==P?t(this,U,2,3,L):17==P?t(this,U,3,3,L=0):18==P?t(this,U,7,11,L=0):U[w++]=L=P}y=this.generateHuffmanTable(U.slice(0,p)),B=this.generateHuffmanTable(U.slice(p,A))}else e("Unknown block type in flate stream");for(var b=this.buffer,z=b?b.length:0,H=this.bufferLength;;){var T=this.getCode(y);if(256>T)H+1>=z&&(b=this.ensureBuffer(H+1),z=b.length),b[H++]=T;else{if(256==T)return void(this.bufferLength=H);T-=257,T=i[T];var D=T>>16;D>0&&(D=this.getBits(D));var L=(65535&T)+D;T=this.getCode(B),T=s[T],D=T>>16,D>0&&(D=this.getBits(D));var F=(65535&T)+D;H+L>=z&&(b=this.ensureBuffer(H+L),z=b.length);for(var E=0;L>E;++E,++H)b[H]=b[H-F]}}},t}();